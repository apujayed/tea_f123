(this["webpackJsonpreact-dashboard"]=this["webpackJsonpreact-dashboard"]||[]).push([[8],{102:function(e,t,c){"use strict";t.a=c.p+"static/media/message.17f316c9.mp3"},103:function(e,t,c){"use strict";c.p},118:function(e,t,c){},124:function(e,t,c){},138:function(e,t,c){"use strict";c.r(t);var n=c(0),s=c(4),a=c(9),r=c.n(a),i=c(5),l=c(93),o=c(10),d=c(2),j=c.n(d),b=c(6),u=c(7),m=c(17),h=(c(118),c.p+"static/media/trading.c31da198.jpg"),O=c(1);var x=function(e){return e.isOpen,e.onClose,Object(O.jsx)("div",{className:"trading container d-flex justify-content-center align-items-center ",children:Object(O.jsxs)("div",{className:"text-center",children:[Object(O.jsx)("img",{src:h,width:"50%",alt:"Image",className:"img-fluid"}),Object(O.jsx)("h2",{className:"mt-3",children:"Trading has not yet started!!"}),Object(O.jsx)("p",{className:"lead",children:"Please be advised that trading has not yet begun for the day. If you are attempting to place a trade, please wait until trading commences before doing so. Thank you for your patience and understanding."})]})})},f=c(102),p=(c(103),c(18)),v=c(100),g=c(137),N=(c(124),function(e){var t=function(t){27===(t.charCode||t.keyCode)&&e.onClose()};return Object(n.useEffect)((function(){return document.body.addEventListener("keydown",t),function(){document.body.removeEventListener("keydown",t)}}),[]),Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(g.a,{in:e.show,unmountOnExit:!0,timeout:{enter:0,exit:300},children:Object(O.jsx)("div",{className:"modal",onClick:e.onClose,children:Object(O.jsxs)("div",{className:"modal-content",onClick:function(e){return e.stopPropagation()},children:[Object(O.jsx)("div",{className:"modal-header",children:Object(O.jsx)("h4",{className:"modal-title",children:e.title})}),Object(O.jsx)("div",{className:"modal-body",children:Object(O.jsxs)("table",{className:"modaltable table-bordered",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{scope:"col",children:"#"}),Object(O.jsx)("th",{scope:"col",children:"Lot"}),Object(O.jsx)("th",{scope:"col",children:"Factory"}),Object(O.jsx)("th",{scope:"col",children:"Price"}),Object(O.jsx)("th",{scope:"col",children:"Bidder"}),Object(O.jsx)("th",{scope:"col",children:"Status"})]})}),Object(O.jsx)("tbody",{children:e.filteredData.map((function(e,t){return Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:Object(O.jsx)("h4",{children:t+1})}),Object(O.jsx)("td",{children:Object(O.jsx)("h4",{children:e.lot})}),Object(O.jsx)("td",{children:Object(O.jsx)("h4",{children:e.factory_name})}),Object(O.jsx)("td",{children:Object(O.jsx)("h4",{children:e.maximum_bid})}),Object(O.jsx)("td",{children:Object(O.jsx)("h4",{children:e.buyer_name})}),Object(O.jsx)("td",{children:Object(O.jsx)("span",{className:1===e.sold_status?"hname":(e.sold_status,"rname"),children:1===e.sold_status?"Sold":0===e.sold_status?"Unsold":"Pending"})})]},t)}))})]})}),Object(O.jsx)("div",{className:"modal-footer",children:Object(O.jsx)("button",{onClick:e.onClose,className:"btn btn-danger",children:"Close"})})]})})})})}),y=c(111),k=c.n(y),w=c(44),_=function(e){var t=e.handleKeyPress,c=e.index,n=(e.time,e.el),s=e.users,a=e.manualmode,r=e.selectedIndex,i=e.handleInputChange,l=e.addBid,o=e.handleInc,d=e.disabledButtons,j=e.setSelectedIndex,b=e.setManualmode;return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("tr",{children:[Object(O.jsxs)("td",{className:"text-center",children:[n.lot,Object(O.jsx)("br",{}),n.invoice]}),Object(O.jsxs)("td",{className:"text-center",children:[n.factory_name,Object(O.jsx)("br",{}),n.grade]}),Object(O.jsxs)("td",{className:"text-center",children:[n.price,Object(O.jsx)("br",{}),"(".concat(n.pkgs,")")]}),Object(O.jsxs)("td",{className:"text-center",children:[0!==n.maximum_bid&&Object(O.jsxs)("div",{className:"bidd_name",children:[Object(O.jsx)("p",{className:"highest",children:n.maximum_bid}),Object(O.jsxs)("span",{className:n.buyer==s.link_id?"hname":"rname",children:["(",n.maximum_bid-n.price,")"]})]}),Object(O.jsx)("br",{})]}),Object(O.jsx)("td",{className:"text-center",children:!0===a&&r===c?Object(O.jsx)("div",{className:"mn-bid col-12",children:Object(O.jsx)("input",{className:"form-control m_bid",autoComplete:"off",type:"number",id:"name".concat(n.id),name:"name",value:n.name,onKeyPress:function(e){return t(n,e,c)},onChange:function(e){return i(e,c)}})}):0===n.maximum_bid?Object(O.jsx)("div",{className:"mn-bid col-12",children:Object(O.jsx)("input",{className:"form-control m_bid",autoComplete:"off",type:"number",id:"name".concat(n.id),name:"name",value:n.name,onChange:function(e){return i(e,c)}})}):Object(O.jsx)(O.Fragment,{})}),Object(O.jsx)("td",{className:"text-center",children:0===n.maximum_bid?Object(O.jsx)("button",{disabled:"BIDDER"!==s.type,onClick:function(){return l(n,c)},className:"btn btn-danger square-circle",children:Object(O.jsx)(w.a,{className:"bid"})},n.id+10):Object(O.jsx)("div",{className:"col-12 ",children:Object(O.jsxs)("div",{className:"bidcont mb-2 d-flex justify-content-center",children:[Object(O.jsx)("button",{disabled:d.includes(c),onClick:function(){return o(n,c)},className:" btn-danger square-circle bidbtn",children:"+1"},n.id+11),Object(O.jsx)("button",{onClick:function(){!0===a&&r===c?l(n,c):(b(!0),j(c))},className:" btn-primary square-circle bidbtn",style:{fontSize:"10px"},children:Object(O.jsx)(w.a,{className:"bid"})},n.id)]})})})]})})},S=v.a.connect("http://68.183.81.28:3009"),C=function(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),c=t[0],s=t[1],a="http://68.183.81.28:3009",d=Object(m.b)(),h=Object(m.c)((function(e){return e.auction})).auction_data,v=localStorage.getItem("users"),g=JSON.parse(v),y=Object(n.useState)([]),w=Object(u.a)(y,2),C=w[0],I=w[1],E=Object(n.useState)(""),T=Object(u.a)(E,2),D=(T[0],T[1]),P=Object(n.useState)(""),B=Object(u.a)(P,2),F=B[0],L=B[1],R=Object(n.useState)(""),A=Object(u.a)(R,2),M=(A[0],A[1]),z=Object(n.useState)(),U=Object(u.a)(z,2),q=U[0],K=U[1],H=Object(n.useState)([]),J=Object(u.a)(H,2),V=J[0],G=J[1],W=Object(n.useState)([]),Q=Object(u.a)(W,2),Y=Q[0],Z=Q[1],X=Object(n.useState)(!1),$=Object(u.a)(X,2),ee=($[0],$[1]),te=Object(n.useState)([]),ce=Object(u.a)(te,2),ne=ce[0],se=ce[1],ae=Object(n.useState)(null),re=Object(u.a)(ae,2),ie=re[0],le=re[1],oe=Object(n.useState)(0),de=Object(u.a)(oe,2),je=de[0],be=de[1],ue=Object(n.useState)(!1),me=Object(u.a)(ue,2),he=(me[0],me[1]),Oe=Object(n.useState)(!0),xe=Object(u.a)(Oe,2),fe=(xe[0],xe[1]),pe=Object(n.useState)(!1),ve=Object(u.a)(pe,2),ge=ve[0],Ne=(ve[1],Object(n.useState)(!1)),ye=Object(u.a)(Ne,2),ke=ye[0],we=ye[1],_e=Object(n.useState)(!1),Se=Object(u.a)(_e,2),Ce=Se[0],Ie=Se[1],Ee=function(){var e=Object(b.a)(j.a.mark((function e(){var t,c,n,s,i,l,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.a.get("".concat(a,"/getselectbroker"));case 3:return t=e.sent,c=t.data[0],n=c.auction,s=c.current_brokers,i=c.name,l=c.id,fe(0===n),e.next=8,Promise.all([L(i),M(l),K(s)]);case 8:return S.emit("user",s),o=function(e){he(e===g.link_id)},S.on("user_toggle",o),e.abrupt("return",(function(){S.off("users",s),S.off("user_toggle",o)}));case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){var e=!0;Ee(),S.on("checkname",(function(t){e&&L(t)})),S.on("users",(function(t){if(e){t.filter((function(e){return 0===e.sold_status}));G(t),Z(t)}}));var t=function(e){be(e)};return S.on("activeUsers",t),function(){e=!1,S.off("activeUsers",t)}}),[S]);var Te=Object(n.useState)(60),De=Object(u.a)(Te,1)[0],Pe=Object(n.useState)(null),Be=Object(u.a)(Pe,2),Fe=Be[0],Le=Be[1],Re=Object(n.useState)(new Date),Ae=Object(u.a)(Re,2),Me=(Ae[0],Ae[1]),ze=Object(n.useState)(De),Ue=Object(u.a)(ze,2),qe=Ue[0],Ke=Ue[1],He=Object(n.useState)(0),Je=Object(u.a)(He,2),Ve=Je[0],Ge=Je[1];Object(n.useEffect)((function(){return S.on("users",(function(e){G(e)})),S.on("endTimeUpdated",(function(e){Le(new Date(e.endTime).getTime())})),function(){S.off("users")}}),[]),Object(n.useEffect)((function(){var e=r.a.CancelToken.source(),t=function(){var t=Object(b.a)(j.a.mark((function t(){var c,n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.a.get("http://68.183.81.28:3009/api/getEndTime",{cancelToken:e.token});case 3:c=t.sent,(n=c.data.endTime)&&Le(new Date(Number(n)).getTime()),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error("Error fetching endTime:",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();return function(){var t=Object(b.a)(j.a.mark((function t(){var c,n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.a.get("http://68.183.81.28:3009/catalougedata",{cancelToken:e.token});case 3:c=t.sent,(n=c.data)&&G(n),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error("Errors fetching endTime:",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}()(),t(),function(){e.cancel("Component unmounted")}}),[]),Object(n.useEffect)((function(){if(Fe){var e=setInterval((function(){var t=new Date;Me(t);var c=Math.floor((Fe-t.getTime())/1e3);c<=0?(clearInterval(e),Ke(0)):(Ke(c),Ge(Math.ceil(c/60)))}),1e3);return function(){return clearInterval(e)}}}),[Fe]);var We=Array.from({length:qe},(function(e,t){return(qe-t)%60||60}))[0],Qe=V?V[Ve-1]:{},Ye=V?V[Ve]:{},Ze=function(){var e=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.a.get("".concat(a,"/getselectbroker")).then((function(e){S.emit("user",e.data[0].current_brokers)})).catch((function(e){console.log(e)}));case 2:d(p.c),s(!0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Xe=function(){var e=Object(b.a)(j.a.mark((function e(t,c){var n,s,i,l,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=t.maximum_bid,i=s+.5*s,l=null===(n=C[c])||void 0===n?void 0:n.name){e.next=7;break}return Ie(!1),e.abrupt("return");case 7:if(!(0!==s&&l<s)){e.next=10;break}return alert("Bid value should be greater than or equal to the maximum bid."),e.abrupt("return");case 10:if(!(l>i&&0!==s)){e.next=13;break}return alert("You can only bid up to 50% of the maximum bid."),e.abrupt("return");case 13:return we(!0),o={id:t.id,bid:l,sold_status:Number(l)>Number(t.price)?1:t.sold_status,buyer:g.link_id},e.prev=15,e.next=18,r.a.put("".concat(a,"/manualbid"),o);case 18:return S.emit("user",q),e.next=21,S.on("user"((function(e){G(e)})));case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(15),console.log(e.t0);case 26:Ie(!1),we(!1);case 28:case"end":return e.stop()}}),e,null,[[15,23]])})));return function(t,c){return e.apply(this,arguments)}}(),$e=function(){var e=Object(b.a)(j.a.mark((function e(t,c){var n,s,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return se((function(e){return[].concat(Object(o.a)(e),[c])})),we(!0),n=new Audio(f.a),s=V.map((function(e,c){return e.id===t.id?Object(l.a)(Object(l.a)({},e),{},{maximum_bid:e.maximum_bid+1,buyer:g.link_id,key:c,sold_status:Number(e.maximum_bid+1)>Number(e.price)?1:e.sold_status}):Object(l.a)(Object(l.a)({},e),{},{key:c})})),i=s.filter((function(e){return e.id===t.id})),e.prev=5,e.next=8,r.a.put("".concat(a,"/updateauction"),i);case 8:S.emit("user",q),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(5),console.log(e.t0);case 14:return e.prev=14,G(s),n.play(),ee(!1),we(!1),se((function(e){return e.filter((function(e){return e!==c}))})),e.finish(14);case 21:case"end":return e.stop()}}),e,null,[[5,11,14,21]])})));return function(t,c){return e.apply(this,arguments)}}(),et=Y.filter((function(e){return e.buyer===g.link_id})),tt=function(e){var t=Math.floor(e/60).toString().padStart(2,"0"),c=(e%60).toString().padStart(2,"0");return"".concat(t,":").concat(c)};return null===Fe||null===V?Object(O.jsxs)("div",{style:{height:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[Object(O.jsx)(k.a,{type:"spin",color:"#007bff",height:50,width:50}),Object(O.jsx)("div",{style:{marginTop:"20px",fontSize:"16px",fontWeight:"bold"},children:"Verifying Data..."})]}):Object(O.jsxs)(O.Fragment,{children:[ke?Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("div",{className:"overlay",children:Object(O.jsxs)("div",{className:"spinner-container",children:[Object(O.jsx)("div",{className:"spinner"}),Object(O.jsx)("span",{children:"Verifying data..."})]})})}):"",ge&&""!==g.type?Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("div",{style:{height:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[Object(O.jsx)(k.a,{type:"spin",color:"#007bff",height:50,width:50}),Object(O.jsx)("div",{style:{marginTop:"20px",fontSize:"16px",fontWeight:"bold"},children:"Verifying Data..."})]})}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(N,{title:"My Lot",onClose:function(){return s(!1)},show:c,filteredData:et}),Object(O.jsxs)("div",{className:"section-head sec-h",children:[Object(O.jsxs)("p",{className:"br-n",children:["=",F,"="]}),Object(O.jsxs)("div",{className:"row newc",children:[Object(O.jsxs)("div",{className:"col-7 col-md-9 card-btn leftCard",children:[Object(O.jsxs)("h2",{children:["Auction Date:"," ",0===h.length?"":h[0].date," "]}),Object(O.jsxs)("p",{children:["SALE NO - #",0===h.length?"":h[0].sale_no," "]}),Object(O.jsxs)("p",{children:["PARTICIPATE - #",je-1," "]}),Object(O.jsxs)("p",{children:["Season - #",0===h.length?"":h[0].season," "]}),Object(O.jsxs)("p",{children:["CURRENT BROKER :"," ",Object(O.jsx)("span",{className:"c_brokers",children:F})," "]}),Object(O.jsx)("div",{className:" row margin-left",children:Object(O.jsx)("button",{type:"button",onClick:Ze,className:"col-5 buttonGroup btn btn-success my-btn",children:"My Lot"})})]}),Object(O.jsx)("div",{className:"col-5 col-md-3 align-items-center justify-content-center mt-5 rCard",children:Object(O.jsx)("div",{className:"col-12",children:Object(O.jsxs)("div",{className:"card",children:[Object(O.jsx)("div",{className:"row rightCard",children:Object(O.jsxs)("div",{className:" ",children:[Object(O.jsx)("div",{className:"col-md-12 count-t",children:Object(O.jsx)("h2",{className:"text-center mh2",children:tt(We||0)})}),Object(O.jsx)("div",{className:"col-md-12 name-t",children:Object(O.jsx)("h2",{className:"mh2 text-center",children:g.short_name})})]})}),Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{className:"col-md-12 name-t mh3",children:Object(O.jsxs)("h4",{className:" text-center",children:["Total : ",V.length," Lot"]})}),Object(O.jsx)("div",{className:"col-md-12 name-t mh3",children:Object(O.jsxs)("h4",{className:" text-center",children:["Remainig Lot : ",Ve||""]})})]})]})})})]})]}),Object(O.jsx)("div",{className:"card p-3",children:Object(O.jsxs)("div",{className:"row",children:[Object(O.jsxs)("div",{className:"col-6 col-md-3 d-flex justify-content-start align-items-center",children:[Object(O.jsx)("span",{style:{backgroundColor:"white",color:"black",padding:"5px",fontSize:"12px"},children:"PLZ BID"}),Object(O.jsx)("span",{style:{backgroundColor:"#6f6fc4",color:"white",padding:"5px",fontSize:"12px"},children:"HBH"})]}),Object(O.jsx)("div",{className:"col-6 col-md-9 d-flex justify-content-end",style:{paddingRight:"20px"},children:Object(O.jsx)("span",{style:{backgroundColor:"black",color:"white",padding:"5px",fontSize:"12px"},children:tt(We||0)})})]})}),0===qe&&"BIDDER"===g.type?Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(x,{})}):Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("div",{className:"table-container con",children:[Object(O.jsx)("div",{className:"row g-1 bid-table",children:Object(O.jsxs)("table",{id:"auction",className:"table table-bordered",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsxs)("th",{scope:"col",children:["Lot ",Object(O.jsx)("br",{}),"Invoice"]}),Object(O.jsxs)("th",{scope:"col",children:["Factory",Object(O.jsx)("br",{}),"Grade"]}),Object(O.jsxs)("th",{scope:"col",children:["Price",Object(O.jsx)("br",{}),"Qty"]}),Object(O.jsxs)("th",{scope:"col",children:["Highest",Object(O.jsx)("br",{})," Buyer"]}),Object(O.jsx)("th",{scope:"col",children:"Bid"}),Object(O.jsx)("th",{scope:"col",children:"Action"})]})}),Object(O.jsx)("tbody",{children:Qe&&Object(O.jsx)(_,{handleKeyPress:function(e,t,c){"Enter"===t.key&&Xe(e,c)},uId:g.link_id,sl:"",time:"",el:Qe,index:Qe.id,setManualmode:Ie,setSelectedIndex:le,users:g,formatTime:"",manualmode:Ce,selectedIndex:ie,handleInputChange:function(e,t){var c=e.target,n=c.name,s=c.value;I((function(e){var c=Object(o.a)(e);return c[t]=Object(l.a)(Object(l.a)({},c[t]),{},Object(i.a)({},n,s)),c})),D(t)},addBid:Xe,handleInc:$e,disabledButtons:ne},Qe.id)})]})}),Object(O.jsx)("div",{className:"",children:Object(O.jsx)("div",{className:"row",children:Ye?Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("div",{className:"col-12 col-md-12",children:Object(O.jsx)("div",{className:"card",children:Object(O.jsx)("div",{className:0===Ye.sold_status?"rem-card-x":"rem-card-y",children:Object(O.jsxs)("div",{className:"row",children:[Object(O.jsxs)("div",{className:"col-8",children:[Object(O.jsx)("div",{className:"col-12",children:Object(O.jsxs)("p",{className:"rem-text",children:["Lot - (",Ye.lot,") ",Ye.factory_name," "]})}),Object(O.jsx)("div",{className:"col-12",children:Object(O.jsxs)("p",{className:"rem-text",children:[Ye.buyer_name,"(",Ye.maximum_bid-Ye.price,")"]})})]}),Object(O.jsx)("div",{className:"col-4 d-flex align-items-center justify-content-center ".concat(0===Ye.sold_status?"btcls":"btctik"),children:Object(O.jsx)("div",{className:"row",children:Object(O.jsx)("div",{className:"col-12 ",children:Object(O.jsx)("i",{className:0===Ye.sold_status?"bi bi-x-circle ":"bi bi-check2-circle"})})})})]})})})})}):""})})]})})]})]})};t.default=function(){var e=Object(s.n)();return Object(n.useEffect)((function(){var t=sessionStorage.getItem("token");e(t?"/bidders":"/")}),[]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("section",{className:"content-header"}),Object(O.jsx)("section",{className:"content",children:Object(O.jsx)("div",{className:"row",children:Object(O.jsx)("div",{className:"col-xs-12",children:Object(O.jsx)(C,{})})})})]})}},93:function(e,t,c){"use strict";c.d(t,"a",(function(){return a}));var n=c(5);function s(e,t){var c=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),c.push.apply(c,n)}return c}function a(e){for(var t=1;t<arguments.length;t++){var c=null!=arguments[t]?arguments[t]:{};t%2?s(Object(c),!0).forEach((function(t){Object(n.a)(e,t,c[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(c)):s(Object(c)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(c,t))}))}return e}}}]);
//# sourceMappingURL=8.84e17a64.chunk.js.map