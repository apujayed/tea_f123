(this["webpackJsonpreact-dashboard"]=this["webpackJsonpreact-dashboard"]||[]).push([[15],{142:function(e,t,r){"use strict";r.r(t);var a=r(0),c=r(4),s=(r(9),r(106),r(2)),n=r.n(s),i=r(6),o=r(5),l=r(93),u=r(7),b=r(17),d=r(36),g=r.n(d),j=(r(101),r(107)),m=r(18),O=r(1),f=function(){var e=Object(b.c)((function(e){return e.catalogue})),t=e.factory_list,r=e.unsold,c=e.catalogue_data,s=e.rating_list,d=localStorage.getItem("users"),f=JSON.parse(d),h=Object(a.useState)([]),p=Object(u.a)(h,2),x=(p[0],p[1],Object(b.b)()),_=Object(a.useState)({}),v=Object(u.a)(_,2),y=v[0],k=v[1],N=function(){var e={};return S.lot||(e.lot="Lot is required."),S.invoice||(e.invoice="Invoice is required."),S.factory||(e.factory="Factory is required."),S.grade||(e.grade="Grade is required."),S.net_weight||(e.net_weight="Weight is required."),S.price||(e.price="Rate is required."),S.pkgs||(e.pkgs="Pkgs is required."),S.totalkg||(e.totalkg="Total is required."),S.warehouse||(e.warehouse="Warehouse is required."),S.category||(e.category="Category is required."),S.sale_no||(e.sale_no="Sale No is required."),S.sample_c||(e.sample_c="Sample is required."),S.gross_total||(e.gross_total="Gross Total is required."),S.lrating||(e.lrating="leaf rating is required."),S.lirating||(e.lirating="liqour rating is required."),S.gross_bag||(e.gross_bag="liqour rating is required."),S.buyer||(e.gross_bag="buyer required."),S.maximum_bid||(e.gross_bag="maximum_bid is required."),e},w=Object(a.useState)({lot:"",invoice:"",factory:"",grade:"",net_weight:"",gross_bag:"",sample_c:"",gross_total:"",price:"",pkgs:"",totalkg:"",brokers:f.link_id,warehouse:"",lrating:"",lirating:"",category:"",sale_no:"",buyer:"",maximum_bid:"",posted:f.username}),q=Object(u.a)(w,2),S=q[0],E=q[1],C=function(e){var t=e.target.name,r=e.target.value;"pkgs"===t?(E((function(e){return Object(l.a)(Object(l.a)({},e),{},Object(o.a)({},t,r))})),H(r)):"sample_c"===t?(E((function(e){return Object(l.a)(Object(l.a)({},e),{},Object(o.a)({},t,r))})),A(r)):E((function(e){return Object(l.a)(Object(l.a)({},e),{},Object(o.a)({},t,r))}))},A=function(e){console.log("888");var t=parseFloat(S.sample_c),r=parseFloat(S.gross_total)-t;E((function(e){return Object(l.a)(Object(l.a)({},e),{},{gross_total:r})}))},H=function(e){var t,r=parseFloat(S.net_weight),a=isNaN(r)?0:r*e;t="LEAF"===S.category?1.5:"DUST"===S.category?.8:.5;var c=a-t;console.log(t),E((function(e){return Object(l.a)(Object(l.a)({},e),{},{totalkg:a,sample_c:t,gross_total:c})}))},F=t.filter((function(e){return"BIDDER"===e.type})),I=(t.filter((function(e){return"WAREHOUSE"===e.type})),t.filter((function(e){return"FACTORY"===e.type})),s.filter((function(e){return"LEAF"===e.type})),s.filter((function(e){return"LIQUOR"===e.type})),function(){var e=Object(i.a)(n.a.mark((function e(t){var r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=N(),!(Object.keys(r).length>0)){e.next=4;break}return k(r),e.abrupt("return");case 4:return t.preventDefault(),e.next=7,x(Object(m.h)(S));case 7:E({lot:"",invoice:"",factory:"",grade:"",net_weight:"",gross_bag:"",sample_c:"",gross_total:"",price:"",pkgs:"",totalkg:"",brokers:f.link_id,warehouse:"",lrating:"",lirating:"",category:"",sale_no:"",buyer:"",maximum_bid:"",posted:f.username}),x(Object(m.c)()),g()({title:"Success",text:"Catalogue created successfully!!",icon:"success",timer:2500,button:!1});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return Object(a.useEffect)((function(){x(Object(m.d)()),x(Object(m.e)())}),[x]),Object(a.useEffect)((function(){r&&(console.log(c[0]),E(c[0]))}),[r]),Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("section",{className:"col-lg-7 connectedSortable",children:Object(O.jsx)("div",{className:"box box-danger",children:Object(O.jsxs)("div",{className:"tab-content no-padding",children:[Object(O.jsx)("div",{className:"box-header header-custom",children:Object(O.jsx)("h3",{className:"box-title",children:"Unsold Item"})}),Object(O.jsx)("div",{className:"box-body form-horizontal",children:Object(O.jsx)("div",{className:"row",children:Object(O.jsxs)("div",{className:"col-md-6",children:[Object(O.jsx)(j.a,{label:"Buyer",name:"buyer",value:S.buyer,type:"select",options:F.map((function(e){return{value:e.id,label:e.name}})),onChange:C,error:y.warehouse}),"      ",Object(O.jsx)(j.a,{label:"Sell Price",name:"maximum_bid",value:S.maximum_bid,type:"text",onChange:C,error:y.maximum_bid})]})})}),Object(O.jsxs)("div",{className:"box-footer",children:[Object(O.jsx)("button",{type:"submit",className:"btn btn-danger",children:"Cancel"}),Object(O.jsx)("input",{type:"button",name:"save",className:"btn btn-success pull-right",defaultValue:r?"Update":"Save",id:"butsave",onClick:r?function(e){var t=N();Object.keys(t).length>0?k(t):r&&(e.preventDefault(),x(Object(m.l)(S)),g()({title:"Success",text:"Catalogue updated successfully!!",icon:"success",timer:2500,button:!1}),E({lot:"",invoice:"",factory:"",grade:"",net_weight:"",gross_bag:"",sample_c:"",gross_total:"",price:"",pkgs:"",totalkg:"",brokers:f.link_id,warehouse:"",lrating:"",lirating:"",category:"",sale_no:"",buyer:"",maximum_bid:"",posted:f.username}),x(Object(m.c)()))}:I})]})]})})})})},h=r(108),p=function(){var e=localStorage.getItem("users"),t=JSON.parse(e),r=Object(b.b)(),c=Object(b.c)((function(e){return e.catalogue})).catalogue_list,s=Object(a.useMemo)((function(){return c.filter((function(e){return e.brokers===t.link_id&&0===e.sold_status}))}),[c,t.link_id]),n=[{Header:"LOT",accessor:"lot"},{Header:"INVOICE",accessor:"invoice"},{Header:"FACTORY",accessor:"factory_name"},{Header:"GRADE",accessor:"grade"},{Header:"NET.W",accessor:"net_weight"},{Header:"PACKAGE",accessor:"pkgs"},{Header:"TOTAL",accessor:"totalkg"},{Header:"WAREHOUSE",accessor:"warehouse_name"},{Header:"CATEGORY",accessor:"category"},{Header:"ACTION",Cell:function(e){var t=e.row;return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("button",{onClick:function(){return r(Object(m.j)(t.original.id))},className:"btn btn-warning mr-2",children:"Edit"})})}}];return Object(a.useEffect)((function(){r(Object(m.c)())}),[]),Object(O.jsx)("section",{className:"col-lg-12 connectedSortable",children:Object(O.jsxs)("div",{className:"box box-primary",children:[Object(O.jsx)("div",{className:"box-header header-custom",children:Object(O.jsx)("div",{className:"row ",children:Object(O.jsx)("div",{className:"col-md-6 text-left",children:Object(O.jsx)("h3",{className:"box-title",children:"Detail Info"})})})}),Object(O.jsx)(h.a,{columns:n,data:s})]})})};t.default=function(){var e=Object(c.n)();return Object(a.useEffect)((function(){var t=sessionStorage.getItem("token");e(t?"/unsold":"/")}),[]),Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("section",{className:"content",children:Object(O.jsx)("div",{className:"row",children:Object(O.jsxs)("div",{className:"col-xs-12",children:[Object(O.jsx)(f,{}),Object(O.jsx)(p,{})]})})})})}}}]);
//# sourceMappingURL=15.1fd7662b.chunk.js.map