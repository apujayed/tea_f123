(this["webpackJsonpreact-dashboard"]=this["webpackJsonpreact-dashboard"]||[]).push([[10],{102:function(e,t,c){"use strict";t.a=c.p+"static/media/message.17f316c9.mp3"},103:function(e,t,c){"use strict";c.p},125:function(e,t,c){},139:function(e,t,c){"use strict";c.r(t);var s=c(0),n=c(4),a=c(9),r=c.n(a),i=c(2),l=c.n(i),o=c(6),j=c(7),d=c(17),b=(c(102),c(103),c(100)),u=(c(27),c(137)),h=(c(125),c(1)),O=function(e){var t=Object(s.useState)(e.filteredData),c=Object(j.a)(t,2),n=(c[0],c[1],Object(s.useState)(!1)),a=Object(j.a)(n,2),r=(a[0],a[1],Object(s.useRef)(null)),i=function(t){27===(t.charCode||t.keyCode)&&e.onClose()};return Object(s.useEffect)((function(){return document.body.addEventListener("keydown",i),function(){document.body.removeEventListener("keydown",i)}}),[]),Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(u.a,{nodeRef:r,in:e.show,unmountOnExit:!0,timeout:{enter:0,exit:300},children:Object(h.jsx)("div",{className:"modal",onClick:e.onClose,ref:r,children:Object(h.jsxs)("div",{className:"modal-content",onClick:function(e){return e.stopPropagation()},children:[Object(h.jsx)("div",{className:"modal-header",children:Object(h.jsx)("h4",{className:"modal-title",children:e.title})}),Object(h.jsx)("div",{className:"modal-body",children:Object(h.jsxs)("table",{className:"modaltable table-bordered",children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{scope:"col",children:"#"}),Object(h.jsx)("th",{scope:"col",children:"Lot"}),Object(h.jsx)("th",{scope:"col",children:"Factory"}),Object(h.jsx)("th",{scope:"col",children:"Price"}),Object(h.jsx)("th",{scope:"col",children:"Bidder"}),Object(h.jsx)("th",{scope:"col",children:"Status"}),Object(h.jsx)("th",{scope:"col",children:"Action"})]})}),Object(h.jsx)("tbody",{children:e.filteredData.map((function(t,c){return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{scope:"row",children:Object(h.jsx)("h4",{children:c+1})}),Object(h.jsx)("td",{children:Object(h.jsx)("h4",{children:t.lot})}),Object(h.jsx)("td",{children:Object(h.jsx)("h4",{children:t.factory_name})}),Object(h.jsx)("td",{children:Object(h.jsx)("h4",{children:t.maximum_bid})}),Object(h.jsx)("td",{children:Object(h.jsx)("h4",{children:t.buyer_name})}),Object(h.jsx)("td",{children:Object(h.jsx)("span",{className:1===t.sold_status?"hname":(t.sold_status,"rname"),children:1===t.sold_status?"Sold":0===t.sold_status?"Unsold":"Pending"})}),Object(h.jsxs)("td",{children:[Object(h.jsx)("button",{type:"button",onClick:function(){return e.onV(t,1)},className:"btn btn-success px-3",children:Object(h.jsx)("i",{className:"fas fa-check","aria-hidden":"true"})}),Object(h.jsx)("button",{type:"button",onClick:function(){return e.onV(t,0)},className:"btn btn-danger px-3",children:Object(h.jsx)("i",{className:"fas fa-times","aria-hidden":"true"})})]})]},t.id)}))})]})}),Object(h.jsx)("div",{className:"modal-footer",children:Object(h.jsx)("button",{onClick:e.onClose,className:"btn btn-danger",children:"Close"})})]})})})})},m=c(111),x=c.n(m),f=(c(101),c(55),c(44)),p=function(e){e.sl;var t=e.el,c=e.users,s=e.handleSoldstatus;e.formatTime,e.time,e.index;return Object(h.jsxs)("tr",{children:[Object(h.jsxs)("td",{className:"text-center",children:[t.lot,Object(h.jsx)("br",{}),t.invoice]}),Object(h.jsxs)("td",{className:"text-center",children:[t.factory_name,Object(h.jsx)("br",{}),"(",t.grade,") Rating: ",Object(h.jsxs)("span",{style:{color:"purple"},children:["(",t.lirating_name,")"]}),Object(h.jsxs)("span",{style:{color:"navy"},children:["(",t.lrating_name,")"]})]}),Object(h.jsxs)("td",{className:"text-center",children:[t.price,Object(h.jsx)("br",{}),"(".concat(t.pkgs,")")]}),Object(h.jsxs)("td",{className:"text-center",children:[Object(h.jsxs)("div",{className:"bidd_name",children:[Object(h.jsx)("p",{className:"highest",children:t.maximum_bid}),Object(h.jsxs)("span",{className:t.buyer==c.link_id?"hname":"rname",children:[t.buyer_name,"(",t.maximum_bid-t.price,")"]})]}),Object(h.jsx)("br",{})]}),Object(h.jsx)("td",{className:"text-center",children:Object(h.jsx)("div",{className:"col-md-12 d-flex justify-content-center align-items-center col-sm-12 col-xs-12",children:Object(h.jsxs)("div",{className:"",children:[Object(h.jsx)("button",{onClick:function(){return s(t,1)},disabled:t.brokers!==c.link_id,className:1===t.sold_status?"btn-success square-circle mr-4":(t.sold_status," btn-warning square-circle mr-4"),children:Object(h.jsx)(f.b,{className:"bid"})}),Object(h.jsx)("button",{onClick:function(){return s(t,0)},disabled:t.brokers!==c.link_id,className:" btn-danger square-circle",children:Object(h.jsx)(f.c,{className:"bid"})})]})})})]})},v=b.a.connect("http://68.183.81.28:3009"),N=function(){var e=Object(s.useState)(!1),t=Object(j.a)(e,2),c=t[0],n=t[1],a="http://68.183.81.28:3009",i=Object(d.c)((function(e){return e.auction})).auction_data,b=localStorage.getItem("users"),u=JSON.parse(b),m=Object(s.useState)(""),f=Object(j.a)(m,2),N=f[0],g=f[1],y=Object(s.useState)(""),k=Object(j.a)(y,2),S=(k[0],k[1]),w=Object(s.useState)(),_=Object(j.a)(w,2),C=(_[0],_[1]),T=Object(s.useState)([]),E=Object(j.a)(T,2),D=E[0],R=E[1],A=Object(s.useState)([]),F=Object(j.a)(A,2),I=(F[0],F[1]),L=Object(s.useState)(0),P=Object(j.a)(L,2),B=P[0],M=(P[1],Object(s.useState)(1)),U=Object(j.a)(M,2),V=(U[0],U[1],Object(s.useState)(0)),q=Object(j.a)(V,2),z=q[0],G=q[1],J=Object(s.useState)(!1),K=Object(j.a)(J,2),W=(K[0],K[1]),H=Object(s.useState)(!0),Q=Object(j.a)(H,2),Y=(Q[0],Q[1]),X=Object(s.useState)(0),Z=Object(j.a)(X,2),$=Z[0],ee=(Z[1],Object(s.useState)(!1)),te=Object(j.a)(ee,2),ce=(te[0],te[1],Object(s.useState)(!1)),se=Object(j.a)(ce,2),ne=se[0],ae=se[1],re=Object(s.useState)(!1),ie=Object(j.a)(re,2),le=ie[0],oe=(ie[1],Object(d.b)(),function(){var e=Object(o.a)(l.a.mark((function e(t,c){var s,n,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,ae(!0),s=t.id,n=c,e.next=6,r.a.put("".concat(a,"/updatesold"),{id:s,status:n});case 6:return e.next=8,r.a.get("".concat(a,"/getselectbroker"));case 8:i=e.sent,v.emit("user",i.data[0].current_brokers),ae(!1),v.on("users",(function(e){e.filter((function(e){return 0===e.sold_status}));R(e),I(e)})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,c){return e.apply(this,arguments)}}()),je=function(){var e=Object(o.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.a.get("".concat(a,"/getselectbroker"));case 3:t=e.sent,v.emit("user",t.data[0].current_brokers),n(!0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),de=D,be=Object(s.useState)(""),ue=Object(j.a)(be,2),he=ue[0],Oe=ue[1],me=function(){var e=Object(o.a)(l.a.mark((function e(){var t,c,s,n,i,o,j;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.a.get("".concat(a,"/getselectbroker"));case 3:return t=e.sent,c=t.data[0],s=c.auction,n=c.current_brokers,i=c.name,o=c.id,Y(0===s),e.next=8,Promise.all([g(i),S(o),C(n)]);case 8:return v.emit("user",n),j=function(e){W(e===u.link_id)},v.on("user_toggle",j),e.abrupt("return",(function(){v.off("users",n),v.off("user_toggle",j)}));case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){var e=!0;me(),v.on("checkname",(function(t){e&&g(t)})),v.on("users",(function(t){if(e){t.filter((function(e){return 0===e.sold_status}));R(t),I(t)}}));var t=function(e){G(e)};return v.on("activeUsers",t),function(){e=!1,v.off("checkname"),v.on("activeUsers",t)}}),[v]);var xe=Object(s.useState)(60),fe=Object(j.a)(xe,1)[0],pe=Object(s.useState)(null),ve=Object(j.a)(pe,2),Ne=ve[0],ge=ve[1],ye=Object(s.useState)(new Date),ke=Object(j.a)(ye,2),Se=(ke[0],ke[1]),we=Object(s.useState)(fe),_e=Object(j.a)(we,2),Ce=_e[0],Te=_e[1],Ee=Object(s.useState)(0),De=Object(j.a)(Ee,2),Re=De[0],Ae=De[1];Object(s.useEffect)((function(){return v.on("endTimeUpdated",(function(e){console.log(e),ge(new Date(e.endTime).getTime())})),function(){v.disconnect()}}),[]),Object(s.useEffect)((function(){var e=r.a.CancelToken.source(),t=function(){var t=Object(o.a)(l.a.mark((function t(){var c,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.a.get("http://68.183.81.28:3009/api/getEndTime",{cancelToken:e.token});case 3:c=t.sent,(s=c.data.endTime)&&ge(new Date(Number(s)).getTime()),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error("Error fetching endTime:",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();return function(){var t=Object(o.a)(l.a.mark((function t(){var c,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.a.get("http://68.183.81.28:3009/catalougedata",{cancelToken:e.token});case 3:c=t.sent,(s=c.data)&&R(s),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error("Errors fetching endTime:",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}()(),t(),function(){e.cancel("Component unmounted")}}),[]),Object(s.useEffect)((function(){if(Ne){var e=setInterval((function(){var t=new Date;Se(t);var c=Math.floor((Ne-t.getTime())/1e3);c<=0?(clearInterval(e),Te(0)):(Te(c),Ae(Math.ceil(c/60)))}),1e3);return function(){return clearInterval(e)}}}),[Ne]);var Fe=function(){var e=Object(o.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(new Date).getTime()+60*D.length*1e3,e.prev=1,e.next=4,r.a.post("http://68.183.81.28:3009/api/saveEndTime",{dbSave:t});case 4:console.log("EndTime saved successfully"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.error("Error saving endTime:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),Ie=Array.from({length:Ce},(function(e,t){return(Ce-t)%60||60}))[0],Le=D[Re-1];return Object(h.jsx)(h.Fragment,{children:N===u.name?Object(h.jsxs)(h.Fragment,{children:[ne?Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("div",{className:"overlay",children:Object(h.jsxs)("div",{className:"spinner-container",children:[Object(h.jsx)("div",{className:"spinner"}),Object(h.jsx)("span",{children:"aaVerifying data..."})]})})}):"",D?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(O,{title:"Brokers Lot",onClose:function(){return n(!1)},show:c,filteredData:de,onV:oe}),Object(h.jsxs)("div",{className:"section-head sec-h",children:[Object(h.jsxs)("p",{className:"br-n",children:["=",N,"="]}),Object(h.jsxs)("div",{className:"row newc",children:[Object(h.jsxs)("div",{className:"col-7 col-md-9 card-btn leftCard",children:[Object(h.jsxs)("h2",{children:["Auction Date:"," ",0===i.length?"":i[0].date," "]}),Object(h.jsxs)("p",{children:["SALE NO - #",0===i.length?"":i[0].sale_no," "]}),Object(h.jsxs)("p",{children:["PARTICIPATE - #",z," "]}),Object(h.jsxs)("p",{children:["Season - #",0===i.length?"":i[0].season," "]}),Object(h.jsxs)("p",{children:["CURRENT BROKER :"," ",Object(h.jsx)("span",{className:"c_brokers",children:N})," "]}),Object(h.jsx)("div",{className:" row margin-left",children:"BROKERS"===u.type?Object(h.jsx)("button",{type:"button",onClick:je,className:"col-5  buttonGroup btn btn-primary  my-btn",children:"All"}):""})]}),Object(h.jsxs)("div",{className:"col-5 col-md-3 align-items-center justify-content-center mt-5 rCard",children:[Object(h.jsx)("div",{className:"bflex card-btn rightButton",children:Object(h.jsx)("div",{className:"button-row",children:Object(h.jsx)("button",{disabled:le,type:"button",onClick:Fe,className:"buttonGroup btn btn-primary my-btn",children:"START"})})}),Object(h.jsx)("div",{className:"col-12",children:Object(h.jsx)("div",{className:"card",children:Object(h.jsx)("div",{className:"row rightCard",children:Object(h.jsxs)("div",{className:" ",children:[Object(h.jsx)("div",{className:"col-md-6 count-t",children:Object(h.jsx)("h2",{className:"text-center mh2",children:function(e){var t=Math.floor(e/60).toString().padStart(2,"0"),c=(e%60).toString().padStart(2,"0");return"".concat(t,":").concat(c)}(Ie||0)})}),Object(h.jsx)("div",{className:"col-md-6 name-t",children:Object(h.jsx)("h2",{className:"mh2 text-center",children:u.short_name})})]})})})})]})]})]}),Object(h.jsx)("div",{className:"card p-3",children:Object(h.jsxs)("div",{className:"row",children:[Object(h.jsxs)("div",{className:"col-6 col-md-3 d-flex justify-content-start align-items-center",children:[Object(h.jsxs)("div",{className:"col",children:[Object(h.jsx)("label",{className:"visually-hidden",htmlFor:"inline-form-website",children:"Message"}),Object(h.jsx)("input",{className:"form-control",type:"text",value:he,onChange:function(e){return Oe(e.target.value)},placeholder:"Message"})," "]}),Object(h.jsx)("div",{className:"col"})]}),Object(h.jsx)("div",{className:"col-6 col-md-9 d-flex justify-content-end",style:{paddingRight:"20px"},children:Object(h.jsx)("span",{style:{backgroundColor:"black",color:"white",padding:"5px",fontSize:"12px"},children:"Last Message"})})]})}),Object(h.jsxs)("h2",{className:"text-center p-h",children:["-=",u.type," PANEL=- "]}),Object(h.jsx)("hr",{className:"hr-h"}),Object(h.jsxs)("div",{className:"con",children:[Object(h.jsx)("div",{className:"row g-1",children:Object(h.jsxs)("table",{id:"auction",className:"table table-bordered",children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsxs)("th",{scope:"col",children:["Lot ",Object(h.jsx)("br",{}),"Invoice"]}),Object(h.jsxs)("th",{scope:"col",children:["Factory",Object(h.jsx)("br",{}),"Grade"]}),Object(h.jsxs)("th",{scope:"col",children:["Price",Object(h.jsx)("br",{}),"Qty"]}),Object(h.jsxs)("th",{scope:"col",children:["Highest",Object(h.jsx)("br",{})," Buyer"]}),Object(h.jsx)("th",{scope:"col",children:"Bid"})]})}),Object(h.jsx)("tbody",{children:Le?Object(h.jsx)(p,{sl:B,el:Le,users:u,handleSoldstatus:oe,formatTime:"",time:$}):Object(h.jsx)("p",{children:"No object to show."})})]})}),Object(h.jsx)("div",{className:"",children:Object(h.jsx)("div",{className:"row",children:Array.isArray(Le)&&Le.map((function(e,t){return Object(h.jsx)("div",{className:"col-12 col-md-12",children:Object(h.jsx)("div",{className:"card",children:Object(h.jsx)("div",{className:1===e.sold_status?"rem-card-y":"rem-card-x",children:Object(h.jsxs)("div",{className:"row",children:[Object(h.jsxs)("div",{className:"col-8",children:[Object(h.jsx)("div",{className:"col-12",children:Object(h.jsxs)("p",{className:"rem-text",children:[e.factory_name," (",e.lot,")"]})}),Object(h.jsx)("div",{className:"col-12",children:Object(h.jsxs)("p",{className:"rem-text",children:[e.buyer_name,"(",e.maximum_bid-e.price,")"]})})]}),Object(h.jsx)("div",{className:"col-4 d-flex align-items-center justify-content-center",children:Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("div",{className:"col-6",children:Object(h.jsx)("i",{className:"bi bi-sun"})}),Object(h.jsx)("div",{className:"col-6",children:Object(h.jsx)("i",{className:"bi bi-moon"})})]})})]})})})},t++)}))})})]})]}):Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("div",{style:{height:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[Object(h.jsx)(x.a,{type:"spin",color:"#007bff",height:50,width:50}),Object(h.jsx)("div",{style:{marginTop:"20px",fontSize:"16px",fontWeight:"bold"},children:"aasVerifying Data..."})]})})]}):Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("div",{style:{height:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[Object(h.jsx)(x.a,{type:"spin",color:"#007bff",height:50,width:50}),Object(h.jsx)("div",{style:{marginTop:"20px",fontSize:"16px",fontWeight:"bold"},children:"You are not selected to perform..."})]})})})};t.default=function(){var e=Object(n.n)();return Object(s.useEffect)((function(){var t=sessionStorage.getItem("token");e(t?"/auction":"/")}),[]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("section",{className:"content-header"}),Object(h.jsx)("section",{className:"content",children:Object(h.jsx)("div",{className:"row",children:Object(h.jsx)("div",{className:"col-xs-12",children:Object(h.jsx)(N,{})})})})]})}}}]);
//# sourceMappingURL=10.fb4a2657.chunk.js.map